# Global Claude Code Instructions

## Identity
<!-- Replace with your own userModel or remove this section -->
<!-- @userModels/{yourname}/{yourname}Model.md -->

## Principles
- Assumptions are the enemy. Benchmark, don't estimate.
- Validate at small scale first. Run sub-minute versions before full pipelines.
- Ground truth understanding before coding. Research, clarify, persist plan, execute.
- Building from scratch can beat adapting legacy code with architectural baggage.
- When user defines constraints ("never X", "always Y"), persist to project's CLAUDE.md.

## Tools
<!-- Uncomment if you maintain your own agent_docs/tools.md -->
<!-- @agent_docs/tools.md -->
- Firecrawl or Jina for scraping (`jina` for Twitter/X). OSGrep over grep. Beads (`bd`) for tasks.
- `beautiful-mermaid` for Mermaid diagrams: `node ~/.claude/skills/beautiful-mermaid/scripts/mermaid.mjs --help`
- `nano-banana-pro` for image generation/editing (Gemini 3 Pro Image)—visual assets, colorization
- `gemini-claude-resonance` for cross-model visual dialogue—Gemini dreams in light, Claude speaks in words; together they resonate
- Python: use uv for everything (`uv run`, `uv pip`, `uv venv`)
- `dabarat` (`md_preview_and_annotate`) for Markdown preview, commenting, and annotation—run `dabarat <file.md>` (or `dbrt`, `mdpreview`, `mdp`). Supports comments, questions, suggestions, bookmarks, replies.
- `grip` for GitHub-flavored README preview—run `grip <file.md> [port]` to render markdown exactly as GitHub would. Use before committing READMEs.
- **RLAMA**: Always use retrieve-only mode (`rlama_retrieve.py`)—Claude synthesizes from raw chunks. Never route through Qwen when Claude is in the loop. `rlama run` is fallback only.

## Interaction
- Clarify unclear requests, then proceed autonomously.
- Only ask for help at genuine blockers (timeouts >2min, sudo, ambiguous intent).
- No "Generated by Claude Code" in commits. Env variables: case-insensitive.
- Em dashes: no spaces, attached to text (e.g. "skills—Slack" not "skills — Slack").

## Planning
- Spec-driven: create/update SPEC.md for non-trivial projects. Re-read when stuck or after compaction.
- **Plan files**: `~/.claude/plans/{project-name}-{date}-{topic}.md` — include project path for linking.

## Always Loaded
<!-- Point these at your own agent_docs if you maintain them -->
<!-- @agent_docs/active-projects.md -->
<!-- @agent_docs/skills.md -->

## On-Demand References
<!-- Add references to docs you want Claude to read on-demand -->
<!-- Example: -->
<!-- - `~/.claude/agent_docs/local-ml.md` — Ollama, HuggingFace, MLX, llama.cpp -->
<!-- - `~/.claude/agent_docs/local-rag.md` — rlama usage & RAG collections -->
<!-- - `~/.claude/agent_docs/mcp-servers.md` — MCP server setup & config -->

## Session Continuity
- **Handoffs**: `~/.claude/handoffs/INDEX.md` — auto-maintained index of recent sessions (date, project, trigger, summary)
- On session start or after crash, read INDEX.md to recover context from prior sessions
- Individual handoff YAMLs: `~/.claude/handoffs/{session_id}.yaml` (objective, completed, decisions, blockers, next_steps)
- Triggers: `compact` (context full), `stop` (every 5 min), `prompt_input_exit`/`other` (graceful exit)

## Infrastructure
- `~/.claude/` is a git repo. Commit notable changes periodically.
- Hooks in `~/.claude/hooks/` (see `settings.json` for bindings)
- Custom commands in `~/.claude/commands/` (tracker suite, workflows, review)
- Model & agent config: see `~/.claude/agent_docs/claude-code-config.md`
